container_commands:
  01_install_ollama:
    command: |
      #!/bin/bash
      # Install required tools
      sudo yum install -y curl
      
      # Install Ollama using the official installation script
      curl -fsSL https://ollama.com/install.sh | sh

      # Optional: Create a systemd service to ensure Ollama starts on boot
      sudo tee /etc/systemd/system/ollama.service > /dev/null << EOL
      [Unit]
      Description=Ollama Service
      After=network-online.target

      [Service]
      ExecStart=/usr/local/bin/ollama serve
      User=root
      Restart=always
      RestartSec=5

      [Install]
      WantedBy=multi-user.target
      EOL

      sudo systemctl daemon-reload
      sudo systemctl enable ollama
      sudo systemctl start ollama
